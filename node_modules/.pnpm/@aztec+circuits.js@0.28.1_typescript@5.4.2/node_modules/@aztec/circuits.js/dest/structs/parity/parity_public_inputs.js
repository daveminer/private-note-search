import { Fr } from '@aztec/foundation/fields';
import { BufferReader, serializeToBuffer } from '@aztec/foundation/serialize';
import { AggregationObject } from '../aggregation_object.js';
export class ParityPublicInputs {
    constructor(
    /** Aggregated proof of all the parity circuit iterations. */
    aggregationObject, 
    /** Root of the SHA256 tree. */
    shaRoot, 
    /** Root of the converted tree. */
    convertedRoot) {
        this.aggregationObject = aggregationObject;
        this.shaRoot = shaRoot;
        this.convertedRoot = convertedRoot;
        if (shaRoot.length !== 32) {
            throw new Error(`shaRoot buffer must be 32 bytes. Got ${shaRoot.length} bytes`);
        }
    }
    toBuffer() {
        return serializeToBuffer(...ParityPublicInputs.getFields(this));
    }
    static from(fields) {
        return new ParityPublicInputs(...ParityPublicInputs.getFields(fields));
    }
    static getFields(fields) {
        return [fields.aggregationObject, fields.shaRoot, fields.convertedRoot];
    }
    static fromBuffer(buffer) {
        const reader = BufferReader.asReader(buffer);
        return new ParityPublicInputs(reader.readObject(AggregationObject), reader.readBytes(32), reader.readObject(Fr));
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFyaXR5X3B1YmxpY19pbnB1dHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc3RydWN0cy9wYXJpdHkvcGFyaXR5X3B1YmxpY19pbnB1dHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUc5RSxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUU3RCxNQUFNLE9BQU8sa0JBQWtCO0lBQzdCO0lBQ0UsNkRBQTZEO0lBQ3RELGlCQUFvQztJQUMzQywrQkFBK0I7SUFDeEIsT0FBZTtJQUN0QixrQ0FBa0M7SUFDM0IsYUFBaUI7UUFKakIsc0JBQWlCLEdBQWpCLGlCQUFpQixDQUFtQjtRQUVwQyxZQUFPLEdBQVAsT0FBTyxDQUFRO1FBRWYsa0JBQWEsR0FBYixhQUFhLENBQUk7UUFFeEIsSUFBSSxPQUFPLENBQUMsTUFBTSxLQUFLLEVBQUUsRUFBRSxDQUFDO1lBQzFCLE1BQU0sSUFBSSxLQUFLLENBQUMsd0NBQXdDLE9BQU8sQ0FBQyxNQUFNLFFBQVEsQ0FBQyxDQUFDO1FBQ2xGLENBQUM7SUFDSCxDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8saUJBQWlCLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUNsRSxDQUFDO0lBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFvQztRQUM5QyxPQUFPLElBQUksa0JBQWtCLENBQUMsR0FBRyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRUQsTUFBTSxDQUFDLFNBQVMsQ0FBQyxNQUFvQztRQUNuRCxPQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixFQUFFLE1BQU0sQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLGFBQWEsQ0FBVSxDQUFDO0lBQ25GLENBQUM7SUFFRCxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQTZCO1FBQzdDLE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDN0MsT0FBTyxJQUFJLGtCQUFrQixDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsaUJBQWlCLENBQUMsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUNuSCxDQUFDO0NBQ0YifQ==