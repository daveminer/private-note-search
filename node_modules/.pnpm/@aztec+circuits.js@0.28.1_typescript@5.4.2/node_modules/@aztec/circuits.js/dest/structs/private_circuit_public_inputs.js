import { makeTuple } from '@aztec/foundation/array';
import { isArrayEmpty } from '@aztec/foundation/collection';
import { pedersenHash } from '@aztec/foundation/crypto';
import { Fr } from '@aztec/foundation/fields';
import { BufferReader, FieldReader, serializeToBuffer, serializeToFields } from '@aztec/foundation/serialize';
import { GeneratorIndex, MAX_NEW_L2_TO_L1_MSGS_PER_CALL, MAX_NEW_NOTE_HASHES_PER_CALL, MAX_NEW_NULLIFIERS_PER_CALL, MAX_NOTE_HASH_READ_REQUESTS_PER_CALL, MAX_NULLIFIER_KEY_VALIDATION_REQUESTS_PER_CALL, MAX_NULLIFIER_READ_REQUESTS_PER_CALL, MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL, MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL, NUM_FIELDS_PER_SHA256, PRIVATE_CIRCUIT_PUBLIC_INPUTS_LENGTH, RETURN_VALUES_LENGTH, } from '../constants.gen.js';
import { Header } from '../structs/header.js';
import { SideEffect, SideEffectLinkedToNoteHash } from '../structs/side_effects.js';
import { CallContext } from './call_context.js';
import { L2ToL1Message } from './l2_to_l1_message.js';
import { NullifierKeyValidationRequest } from './nullifier_key_validation_request.js';
import { ReadRequest } from './read_request.js';
/**
 * Public inputs to a private circuit.
 * @see abis/private_circuit_public_inputs.hpp.
 */
export class PrivateCircuitPublicInputs {
    constructor(
    /**
     * Context of the call corresponding to this private circuit execution.
     */
    callContext, 
    /**
     * Pedersen hash of function arguments.
     */
    argsHash, 
    /**
     * Return values of the corresponding function call.
     */
    returnValues, 
    /**
     * The side-effect counter under which all side effects are non-revertible.
     */
    minRevertibleSideEffectCounter, 
    /**
     * Read requests created by the corresponding function call.
     */
    noteHashReadRequests, 
    /**
     * Nullifier read requests created by the corresponding function call.
     */
    nullifierReadRequests, 
    /**
     * Nullifier key validation requests created by the corresponding function call.
     */
    nullifierKeyValidationRequests, 
    /**
     * New note hashes created by the corresponding function call.
     */
    newNoteHashes, 
    /**
     * New nullifiers created by the corresponding function call.
     */
    newNullifiers, 
    /**
     * Private call stack at the current kernel iteration.
     */
    privateCallStackHashes, 
    /**
     * Public call stack at the current kernel iteration.
     */
    publicCallStackHashes, 
    /**
     * New L2 to L1 messages created by the corresponding function call.
     */
    newL2ToL1Msgs, 
    /**
     * The side effect counter at the start of this call.
     */
    startSideEffectCounter, 
    /**
     * The end side effect counter for this call.
     */
    endSideEffectCounter, 
    /**
     * Hash of the encrypted logs emitted in this function call.
     * Note: Represented as an array of 2 fields in order to fit in all of the 256 bits of sha256 hash.
     */
    encryptedLogsHash, 
    /**
     * Hash of the unencrypted logs emitted in this function call.
     * Note: Represented as an array of 2 fields in order to fit in all of the 256 bits of sha256 hash.
     */
    unencryptedLogsHash, 
    /**
     * Length of the encrypted log preimages emitted in this function call.
     * Note: Here so that the gas cost of this request can be measured by circuits, without actually needing to feed
     *       in the variable-length data.
     */
    encryptedLogPreimagesLength, 
    /**
     * Length of the unencrypted log preimages emitted in this function call.
     */
    unencryptedLogPreimagesLength, 
    /**
     * Header of a block whose state is used during private execution (not the block the transaction is included in).
     */
    historicalHeader, 
    /**
     * Chain Id of the instance.
     *
     * Note: The following 2 values are not redundant to the values in self.historical_header.global_variables because
     * they can be different in case of a protocol upgrade. In such a situation we could be using header from a block
     * before the upgrade took place but be using the updated protocol to execute and prove the transaction.
     */
    chainId, 
    /**
     * Version of the instance.
     */
    version) {
        this.callContext = callContext;
        this.argsHash = argsHash;
        this.returnValues = returnValues;
        this.minRevertibleSideEffectCounter = minRevertibleSideEffectCounter;
        this.noteHashReadRequests = noteHashReadRequests;
        this.nullifierReadRequests = nullifierReadRequests;
        this.nullifierKeyValidationRequests = nullifierKeyValidationRequests;
        this.newNoteHashes = newNoteHashes;
        this.newNullifiers = newNullifiers;
        this.privateCallStackHashes = privateCallStackHashes;
        this.publicCallStackHashes = publicCallStackHashes;
        this.newL2ToL1Msgs = newL2ToL1Msgs;
        this.startSideEffectCounter = startSideEffectCounter;
        this.endSideEffectCounter = endSideEffectCounter;
        this.encryptedLogsHash = encryptedLogsHash;
        this.unencryptedLogsHash = unencryptedLogsHash;
        this.encryptedLogPreimagesLength = encryptedLogPreimagesLength;
        this.unencryptedLogPreimagesLength = unencryptedLogPreimagesLength;
        this.historicalHeader = historicalHeader;
        this.chainId = chainId;
        this.version = version;
    }
    /**
     * Create PrivateCircuitPublicInputs from a fields dictionary.
     * @param fields - The dictionary.
     * @returns A PrivateCircuitPublicInputs object.
     */
    static from(fields) {
        return new PrivateCircuitPublicInputs(...PrivateCircuitPublicInputs.getFields(fields));
    }
    /**
     * Deserializes from a buffer or reader.
     * @param buffer - Buffer or reader to read from.
     * @returns The deserialized instance.
     */
    static fromBuffer(buffer) {
        const reader = BufferReader.asReader(buffer);
        return new PrivateCircuitPublicInputs(reader.readObject(CallContext), reader.readObject(Fr), reader.readArray(RETURN_VALUES_LENGTH, Fr), reader.readObject(Fr), reader.readArray(MAX_NOTE_HASH_READ_REQUESTS_PER_CALL, SideEffect), reader.readArray(MAX_NULLIFIER_READ_REQUESTS_PER_CALL, ReadRequest), reader.readArray(MAX_NULLIFIER_KEY_VALIDATION_REQUESTS_PER_CALL, NullifierKeyValidationRequest), reader.readArray(MAX_NEW_NOTE_HASHES_PER_CALL, SideEffect), reader.readArray(MAX_NEW_NULLIFIERS_PER_CALL, SideEffectLinkedToNoteHash), reader.readArray(MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL, Fr), reader.readArray(MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL, Fr), reader.readArray(MAX_NEW_L2_TO_L1_MSGS_PER_CALL, L2ToL1Message), reader.readObject(Fr), reader.readObject(Fr), reader.readArray(NUM_FIELDS_PER_SHA256, Fr), reader.readArray(NUM_FIELDS_PER_SHA256, Fr), reader.readObject(Fr), reader.readObject(Fr), reader.readObject(Header), reader.readObject(Fr), reader.readObject(Fr));
    }
    static fromFields(fields) {
        const reader = FieldReader.asReader(fields);
        return new PrivateCircuitPublicInputs(reader.readObject(CallContext), reader.readField(), reader.readFieldArray(RETURN_VALUES_LENGTH), reader.readField(), reader.readArray(MAX_NOTE_HASH_READ_REQUESTS_PER_CALL, SideEffect), reader.readArray(MAX_NULLIFIER_READ_REQUESTS_PER_CALL, ReadRequest), reader.readArray(MAX_NULLIFIER_KEY_VALIDATION_REQUESTS_PER_CALL, NullifierKeyValidationRequest), reader.readArray(MAX_NEW_NOTE_HASHES_PER_CALL, SideEffect), reader.readArray(MAX_NEW_NULLIFIERS_PER_CALL, SideEffectLinkedToNoteHash), reader.readFieldArray(MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL), reader.readFieldArray(MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL), reader.readArray(MAX_NEW_L2_TO_L1_MSGS_PER_CALL, L2ToL1Message), reader.readField(), reader.readField(), reader.readFieldArray(NUM_FIELDS_PER_SHA256), reader.readFieldArray(NUM_FIELDS_PER_SHA256), reader.readField(), reader.readField(), reader.readObject(Header), reader.readField(), reader.readField());
    }
    /**
     * Create an empty PrivateCircuitPublicInputs.
     * @returns An empty PrivateCircuitPublicInputs object.
     */
    static empty() {
        return new PrivateCircuitPublicInputs(CallContext.empty(), Fr.ZERO, makeTuple(RETURN_VALUES_LENGTH, Fr.zero), Fr.ZERO, makeTuple(MAX_NOTE_HASH_READ_REQUESTS_PER_CALL, SideEffect.empty), makeTuple(MAX_NULLIFIER_READ_REQUESTS_PER_CALL, ReadRequest.empty), makeTuple(MAX_NULLIFIER_KEY_VALIDATION_REQUESTS_PER_CALL, NullifierKeyValidationRequest.empty), makeTuple(MAX_NEW_NOTE_HASHES_PER_CALL, SideEffect.empty), makeTuple(MAX_NEW_NULLIFIERS_PER_CALL, SideEffectLinkedToNoteHash.empty), makeTuple(MAX_PRIVATE_CALL_STACK_LENGTH_PER_CALL, Fr.zero), makeTuple(MAX_PUBLIC_CALL_STACK_LENGTH_PER_CALL, Fr.zero), makeTuple(MAX_NEW_L2_TO_L1_MSGS_PER_CALL, L2ToL1Message.empty), Fr.ZERO, Fr.ZERO, makeTuple(NUM_FIELDS_PER_SHA256, Fr.zero), makeTuple(NUM_FIELDS_PER_SHA256, Fr.zero), Fr.ZERO, Fr.ZERO, Header.empty(), Fr.ZERO, Fr.ZERO);
    }
    isEmpty() {
        // eslint-disable-next-line jsdoc/require-jsdoc
        const isEmptyArray = (arr) => isArrayEmpty(arr, item => item.isEmpty());
        // eslint-disable-next-line jsdoc/require-jsdoc
        const isZeroArray = (arr) => isArrayEmpty(arr, item => item.isZero());
        return (this.callContext.isEmpty() &&
            this.argsHash.isZero() &&
            isZeroArray(this.returnValues) &&
            this.minRevertibleSideEffectCounter.isZero() &&
            isEmptyArray(this.noteHashReadRequests) &&
            isEmptyArray(this.nullifierReadRequests) &&
            isEmptyArray(this.nullifierKeyValidationRequests) &&
            isEmptyArray(this.newNoteHashes) &&
            isEmptyArray(this.newNullifiers) &&
            isZeroArray(this.privateCallStackHashes) &&
            isZeroArray(this.publicCallStackHashes) &&
            isEmptyArray(this.newL2ToL1Msgs) &&
            isZeroArray(this.encryptedLogsHash) &&
            isZeroArray(this.unencryptedLogsHash) &&
            this.encryptedLogPreimagesLength.isZero() &&
            this.unencryptedLogPreimagesLength.isZero() &&
            this.historicalHeader.isEmpty() &&
            this.chainId.isZero() &&
            this.version.isZero());
    }
    /**
     * Serialize into a field array. Low-level utility.
     * @param fields - Object with fields.
     * @returns The array.
     */
    static getFields(fields) {
        return [
            fields.callContext,
            fields.argsHash,
            fields.returnValues,
            fields.minRevertibleSideEffectCounter,
            fields.noteHashReadRequests,
            fields.nullifierReadRequests,
            fields.nullifierKeyValidationRequests,
            fields.newNoteHashes,
            fields.newNullifiers,
            fields.privateCallStackHashes,
            fields.publicCallStackHashes,
            fields.newL2ToL1Msgs,
            fields.startSideEffectCounter,
            fields.endSideEffectCounter,
            fields.encryptedLogsHash,
            fields.unencryptedLogsHash,
            fields.encryptedLogPreimagesLength,
            fields.unencryptedLogPreimagesLength,
            fields.historicalHeader,
            fields.chainId,
            fields.version,
        ];
    }
    /**
     * Serialize this as a buffer.
     * @returns The buffer.
     */
    toBuffer() {
        return serializeToBuffer(...PrivateCircuitPublicInputs.getFields(this));
    }
    /**
     * Serialize this as a field array.
     */
    toFields() {
        const fields = serializeToFields(...PrivateCircuitPublicInputs.getFields(this));
        if (fields.length !== PRIVATE_CIRCUIT_PUBLIC_INPUTS_LENGTH) {
            throw new Error(`Invalid number of fields for PrivateCircuitPublicInputs. Expected ${PRIVATE_CIRCUIT_PUBLIC_INPUTS_LENGTH}, got ${fields.length}`);
        }
        return fields;
    }
    hash() {
        return pedersenHash(this.toFields().map(field => field.toBuffer()), GeneratorIndex.PRIVATE_CIRCUIT_PUBLIC_INPUTS);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpdmF0ZV9jaXJjdWl0X3B1YmxpY19pbnB1dHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvc3RydWN0cy9wcml2YXRlX2NpcmN1aXRfcHVibGljX2lucHV0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDcEQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLDhCQUE4QixDQUFDO0FBQzVELE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUN4RCxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDOUMsT0FBTyxFQUFFLFlBQVksRUFBRSxXQUFXLEVBQVMsaUJBQWlCLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUdySCxPQUFPLEVBQ0wsY0FBYyxFQUNkLDhCQUE4QixFQUM5Qiw0QkFBNEIsRUFDNUIsMkJBQTJCLEVBQzNCLG9DQUFvQyxFQUNwQyw4Q0FBOEMsRUFDOUMsb0NBQW9DLEVBQ3BDLHNDQUFzQyxFQUN0QyxxQ0FBcUMsRUFDckMscUJBQXFCLEVBQ3JCLG9DQUFvQyxFQUNwQyxvQkFBb0IsR0FDckIsTUFBTSxxQkFBcUIsQ0FBQztBQUM3QixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDOUMsT0FBTyxFQUFFLFVBQVUsRUFBRSwwQkFBMEIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQ3BGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUNoRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDdEQsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDdEYsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBRWhEOzs7R0FHRztBQUNILE1BQU0sT0FBTywwQkFBMEI7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